"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".humburger"),t=document.querySelector("body");null!==e&&(e.onclick=()=>{e.classList.toggle("__active"),t.classList.toggle("__active")}),window.addEventListener("click",n=>{e.contains(n.target)||(e.classList.remove("__active"),t.classList.remove("__active"))})})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".to__top");null!==e&&(window.addEventListener("scroll",(function(){let t=window.pageYOffset,n=document.documentElement.clientHeight;t>n&&e.classList.add("to__top_show"),t<n&&e.classList.remove("to__top_show")})),e.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(e,0))})))})),document.addEventListener("DOMContentLoaded",(function(){let e=function(e,t){let n,o,s=document.querySelector(e),i=s.querySelector(".slider__items"),a=s.querySelectorAll(".slider__item"),l=(s.querySelectorAll(".slider__control"),0),r=0,c=[],d=0,u=a.length-1,p={isAutoplay:!0,directionAutoplay:"next",delayAutoplay:5e3,isPauseOnHover:!0};for(let e in t)e in p&&(p[e]=t[e]);for(let e=0;e<a.length;e++)c.push({item:a[e],position:e,transform:0});let g={getItemIndex:function(e){let t=0;for(let n=0;n<c.length;n++)(c[n].position<c[t].position&&"min"===e||c[n].position>c[t].position&&"max"===e)&&(t=n);return t},getItemPosition:function(e){return c[g.getItemIndex(e)].position}},m=function(e){let t,n=d;"next"===e?(l++,l>g.getItemPosition("max")&&(t=g.getItemIndex("min"),c[t].position=g.getItemPosition("max")+1,c[t].transform+=100*c.length,c[t].item.style.transform="translateX("+c[t].transform+"%)"),r-=100,d+=1,d>u&&(d=0)):(l--,l<g.getItemPosition("min")&&(t=g.getItemIndex("max"),c[t].position=g.getItemPosition("min")-1,c[t].transform-=100*c.length,c[t].item.style.transform="translateX("+c[t].transform+"%)"),r+=100,d-=1,d<0&&(d=u)),i.style.transform="translateX("+r+"%)",o[n].classList.remove("active"),o[d].classList.add("active")},f=function(){p.isAutoplay&&(h(),n=setInterval((function(){m(p.directionAutoplay)}),p.delayAutoplay))},h=function(){clearInterval(n)};return function(){let e=document.createElement("ol");e.classList.add("slider__indicators");for(let t=0;t<a.length;t++){let n=document.createElement("li");0===t&&n.classList.add("active"),n.setAttribute("data-slide-to",t),e.appendChild(n)}s.appendChild(e),o=s.querySelectorAll(".slider__indicators > li")}(),s.addEventListener("click",(function(e){e.target.classList.contains("slider__control")?(e.preventDefault(),m(e.target.classList.contains("slider__control_next")?"next":"prev"),f()):e.target.getAttribute("data-slide-to")&&(e.preventDefault(),function(e){let t=0,n=e>d?"next":"prev";for(;e!==d&&t<=u;)m(n),t++}(parseInt(e.target.getAttribute("data-slide-to"))),f())})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?h():f()}),!1),p.isPauseOnHover&&p.isAutoplay&&(s.addEventListener("mouseenter",(function(){h()})),s.addEventListener("mouseleave",(function(){f()}))),f(),{next:function(){m("next")},left:function(){m("prev")},stop:function(){p.isAutoplay=!1,h()},cycle:function(){p.isAutoplay=!0,f()}}};null!==document.querySelector("#slider")&&e(".slider",{isAutoplay:!0})}));const body=document.querySelector("body"),modalBtn=document.querySelectorAll("[data-toggle]");modalBtn.forEach((function(e){e.addEventListener("click",modalBtnSend)}));const modalBtnClose=document.querySelectorAll("[data-dismiss]");async function modalBtnSend(e){const t=(e=e||window.event).target;if(e.preventDefault(),t.hasAttribute("data-toggle")&&"modal"==t.getAttribute("data-toggle")&&t.hasAttribute("data-target")){const e=t.getAttribute("data-target");document.getElementById(e).classList.add("__open"),body.classList.add("lock")}}async function modalClose(e){const t=(e=e||window.event).target;if(e.preventDefault(),t.hasAttribute("data-dismiss")&&"modal"==t.getAttribute("data-dismiss")){document.querySelector('[class="modal __open"]').classList.remove("__open"),body.classList.remove("lock")}}modalBtnClose.forEach((function(e){e.addEventListener("click",modalClose)})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".form__item_select_wrapper"),t=document.querySelector("select");function n(){"click"==window.event.type&&(t.classList.contains("__active")?(t.classList.remove("__active"),e.classList.remove("__active")):(t.classList.add("__active"),e.classList.add("__active"))),"blur"==window.event.type&&(t.classList.remove("__active"),e.classList.remove("__active"))}null!==t&&(t.addEventListener("blur",()=>n()),t.addEventListener("click",()=>n()))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("__error"),e.classList.add("__error")}function n(e){e.parentElement.classList.remove("__error"),e.classList.remove("__error")}function o(e){return!/^\w+([\.-]?\w+)*@\w([\.-]?\w+)*(\.\w+)*(\.\w{2,8})+$/.test(e.value)}function s(e){return!/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/.test(e.value)}null!==e&&e.addEventListener("submit",(async function(l){l.preventDefault();let r=function(e){let i=0,a=document.querySelectorAll(".__req");for(let e=0;e<a.length;e++){const l=a[e];n(l),l.classList.contains("__email")?o(l)&&(t(l),i++):l.classList.contains("__phone")?s(l)&&(t(l),i++):("checkbox"===l.getAttribute("type")&&!1===l.checked||""===l.value)&&(t(l),i++)}return i}(),c=new FormData(e);if(c.append("image",i.files[0]),0===r){e.classList.add("__sending");let t=await fetch("sendmail.php",{method:"POST",body:c});if(t.ok){let n=await t.json();Toast.add({text:n.message,color:"#008000"}),a.innerHTML="",e.reset(),e.classList.remove("__sending")}else Toast.add({text:"Ошибка",color:"#ff0000"}),e.classList.remove("__sending")}else Toast.add({text:"Заполните обязательные поля",color:"#ff0000"})}));const i=document.getElementById("formImage"),a=document.getElementById("formPreview");null!==i&&i.addEventListener("change",()=>{!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return Toast.add({text:"Разрешены только изображения",color:"#ff0000"}),void(i.value="");if(e.size>2097152)return void Toast.add({text:"Файл должен быть менее 2 МБ",color:"#ff0000"});let t=new FileReader;t.onload=function(e){a.innerHTML=`<img src="${e.target.result}" alt="Фото">`},t.onerror=function(e){Toast.add({text:"Ошибка",color:"#ff0000"})},t.readAsDataURL(e)}(i.files[0])})})),window.addEventListener("DOMContentLoaded",(function(){document.querySelector("#formPhone").addEventListener("input",(function(e){let t=this.defaultValue,n=0,o=t.replace(/\D/g,""),s=this.value.replace(/\D/g,"");o.length>=s.length&&(s=o),t=t.replace(/[_\d]/g,(function(e){return s.charAt(n++)||"_"})),this.value=t,n=t.lastIndexOf(s.substr(-1)),n<t.length&&t!=this.defaultValue?n++:n=t.indexOf("_"),function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}(n,this)}),!1)}));let Toast=function(e,t){let n=this,o=e,s={autohide:!0,delay:5e3};for(let e in t)s[e]=t[e];Object.defineProperty(this,"element",{get:function(){return o}}),Object.defineProperty(this,"config",{get:function(){return s}}),o.addEventListener("click",(function(e){e.target.classList.contains("toast__close")&&n.hide()}))};Toast.prototype={show:function(){let e=this;this.element.classList.add("toast_show"),this.config.autohide&&setTimeout((function(){e.hide()}),this.config.delay)},hide:function(){let e=new CustomEvent("hidden.toast",{detail:{toast:this.element}});this.element.classList.remove("toast_show"),document.dispatchEvent(e)}},Toast.create=function(e,t){let n=document.createDocumentFragment(),o=document.createElement("div"),s=document.createElement("button");return o.classList.add("toast"),o.style.backgroundColor="rgba("+parseInt(t.substr(1,2),16)+","+parseInt(t.substr(3,2),16)+","+parseInt(t.substr(5,2),16)+",0.5)",o.textContent=e,s.classList.add("toast__close"),s.setAttribute("type","button"),s.textContent="×",o.appendChild(s),n.appendChild(o),n},Toast.add=function(e){let t={text:"Текст сообщения...",color:"#ffffff",autohide:!0,delay:5e3};if(void 0!==e)for(let n in e)t[n]=e[n];if(!document.querySelector(".toasts")){let e=document.createElement("div");e.classList.add("toasts"),e.style.cssText="position: fixed; top: 15px; right: 15px; width: 250px;",document.body.appendChild(e)}document.querySelector(".toasts").appendChild(Toast.create(t.text,t.color));let n=document.querySelectorAll(".toast"),o=new Toast(n[n.length-1],{autohide:t.autohide,delay:t.delay});return o.show(),o},document.addEventListener("hidden.toast",(function(e){let t=e.detail.toast;t&&t.parentNode.removeChild(t)}));const docSlider=function(){let e,t,n={};const o={speed:600,easing:"ease",pager:!0,horizontal:!1,startSpeed:null,scrollReset:!1,complete:function(){},beforeChange:function(){},afterChange:function(){},setInitCss:function(e,t){const n={};return n[t?"left":"top"]=100*e+"%",n},setChangeCss:function(e,t,n,o,s){const i=s?"X":"Y",a={transitionProperty:"transform"};return a.transitionDuration=n+"ms",a.transitionTimingFunction=o,a.transform="translate"+i+"(-"+100*t+"%)",a}},s=function(e){if(void 0===e)return;const t=Object.keys(e);for(let n=0;n<t.length;n++){const s=t[n];o[s]=e[s]}o.pager||(d.updatePager=function(){})},i=function(){const e=document.querySelector(".docSlider"),t=document.createElement("div"),n=document.querySelectorAll(".docSlider > *:not(.docSlider-pager)");t.classList.add("docSlider-inner");for(let e=0;e<n.length;e++){const s=n[e],i=o.setInitCss(e,o.horizontal);for(let e=0;e<Object.keys(i).length;e++){const t=Object.keys(i)[e];s.style[t]=i[t]}s.classList.add("docSlider-page"),s.classList.add("docSlider-scroll"),s.setAttribute("images-ds-index",e.toString()),s.setAttribute("tabindex","0"),t.appendChild(s)}e.appendChild(t)},a=function(){if(!o.pager)return;const e=document.querySelectorAll(".docSlider-inner > *").length;if(document.querySelector(".docSlider-pager")){const e=document.querySelectorAll(".docSlider-button");for(let t=0;t<e.length;t++){let n=e[t];n.setAttribute("images-ds-jump",t.toString()),n.setAttribute("tabindex","-1")}}else{const t=document.createElement("nav");t.classList.add("docSlider-pager");for(let n=0;n<e;n++){let e=document.createElement("button");e.classList.add("docSlider-button"),e.setAttribute("images-ds-jump",n.toString()),e.setAttribute("tabindex","-1"),t.appendChild(e)}document.querySelector(".docSlider").appendChild(t)}},l=function(){n.html=document.documentElement,n.wrapper=document.querySelector(".docSlider"),n.pages=document.querySelectorAll(".docSlider-inner > *"),n.pager=document.querySelector(".docSlider-pager"),n.buttons=document.querySelectorAll(".docSlider-pager .docSlider-button"),n.length=n.pages.length,n.now=0,n.past=0,n.xy=o.horizontal?"X":"Y",n.yx=o.horizontal?"Y":"X",n.wheel="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll",n.wheelTick=!0,n.wheelEnable=!0,n.fromPoint="elementsFromPoint"in document?"elementsFromPoint":"msElementsFromPoint",n.isTouch="ontouchstart"in window,n.isMobile=/iPhone|Android.+Mobile/.test(navigator.userAgent),n.resizeTimer=0,n.speed=null,n.easing=null,n.enable=!0,n.type=null,n.pastType=null,n.active=null,d.updatePager(),d.updateClass(),n.active=n.pages[n.now],n.pages[n.now].focus({preventScroll:!1})},r=function(){for(let e=0;e<n.length;e++){const t=n.pages[e],o=n.buttons[e];t.addEventListener("focusin",d.focusin),void 0!==o&&o.addEventListener("click",d.pagerClick)}document.addEventListener("keyup",d.keyup),document.addEventListener(n.wheel,d.wheel),n.pages[0].addEventListener("transitionstart",d.transitionstart),n.pages[0].addEventListener("transitionend",d.transitionend),n.isTouch&&(n.touch={move:!1,nextX:"right",prevX:"left",nextY:"bottom",prevY:"top",X:{},Y:{}},n.wrapper.addEventListener("touchstart",d.touchstart,!1),n.wrapper.addEventListener("touchmove",d.touchmove,!1),n.wrapper.addEventListener("touchend",d.touchend,!1)),n.isMobile&&(d.setFV(),window.addEventListener("resize",d.resize))},c=function(){const e=d.hashToIndex(location.hash);return e!==n.now&&(n.speed=null===o.startSpeed?o.speed:o.startSpeed,n.type="anchor",n.speed?setTimeout((function(){d.pageChange(e)}),200):d.pageChange(e),!0)},d={hashToIndex:function(e){return function(){if(e.length){let t=document.querySelector(e);return t&&t.hasAttribute("images-ds-index")?Number(t.getAttribute("images-ds-index")):0}return 0}()},indexCheck:function(e){return e>=0&&e<n.length?e:n.now},pageChange:function(s){if("focus"!==n.type&&n.pages[s].focus(),n.active=n.pages[s],s===n.now)return;n.type=n.type?n.type:"focus",n.past=n.now,n.now=s;let i=null===n.speed?o.speed:n.speed;const a=null===n.easing?o.easing:n.easing;for(let e=0;e<n.length;e++){const t=n.pages[e],s=o.setChangeCss(e,n.now,i,a,o.horizontal);for(let e=0;e<Object.keys(s).length;e++){const n=Object.keys(s)[e];t.style[n]=s[n]}}i||(o.scrollReset&&d.scrollReset(n.pages[n.now]),t&&d.animationReset(n.past),o.beforeChange(n.past,n.pages[n.past],n.now,n.pages[n.now],n.type),n.pastType=n.type,n.type=null,e&&scrollCue._updateWithDocSlider(),o.afterChange(n.now,n.pages[n.now],n.past,n.pages[n.past],n.pastType),n.pastType=null),n.speed=null,n.easing=null,d.updatePager(),d.updateClass()},focusin:function(){const e=Number(this.getAttribute("images-ds-index"));n.type=n.type?n.type:"focus",d.pageChange(e)},focusinx:function(){const s=Number(this.getAttribute("images-ds-index"));if(n.active=n.pages[s],s===n.now)return;n.type=n.type?n.type:"focus",n.past=n.now,n.now=s;let i=null===n.speed?o.speed:n.speed;const a=null===n.easing?o.easing:n.easing;for(let e=0;e<n.length;e++){const t=n.pages[e],s=o.setChangeCss(e,n.now,i,a,o.horizontal);for(let e=0;e<Object.keys(s).length;e++){const n=Object.keys(s)[e];t.style[n]=s[n]}}i||(o.scrollReset&&d.scrollReset(n.pages[n.now]),t&&d.animationReset(n.past),o.beforeChange(n.past,n.pages[n.past],n.now,n.pages[n.now],n.type),n.pastType=n.type,n.type=null,e&&scrollCue._updateWithDocSlider(),o.afterChange(n.now,n.pages[n.now],n.past,n.pages[n.past],n.pastType),n.pastType=null),n.speed=null,n.easing=null,d.updatePager(),d.updateClass()},pagerClick:function(){if(!n.enable)return;const e=Number(this.getAttribute("images-ds-jump"));n.type="pager",d.pageChange(e)},updatePager:function(){for(let e=0;e<n.length;e++){const t=n.buttons[e];void 0!==t&&t.classList.remove("selected")}void 0!==n.buttons[n.now]&&n.buttons[n.now].classList.add("selected")},updateClass:function(){const e=n.pages[n.past],t=e.getAttribute("images-ds-index"),o=Number(t)+1,s=!!e.hasAttribute("id")&&e.getAttribute("id"),i=n.pages[n.now],a=i.getAttribute("images-ds-index"),l=Number(a)+1,r=!!i.hasAttribute("id")&&i.getAttribute("id");n.html.classList.remove("docSlider-index_"+t),n.html.classList.remove("docSlider-page_"+o),n.html.classList.remove("docSlider-id_"+s),n.html.classList.add("docSlider-index_"+a),n.html.classList.add("docSlider-page_"+l),r&&n.html.classList.add("docSlider-id_"+r),n.pages[n.past].classList.remove("docSlider-current"),n.pages[n.now].classList.add("docSlider-current")},keyup:function(e){if(!n.enable)return;if(n.pages[n.now]!==document.activeElement)return;let t;const s=e.key,i=e.shiftKey,a=n.pages[n.now];if((i&&/ |Spacebar/.test(s)||!i&&/ArrowUp|Up|PageUp/.test(s))&&d.scrollEnd(a,"top"))t=n.now-1;else if(!i&&/ |Spacebar|ArrowDown|Down|PageDown/.test(s)&&d.scrollEnd(a,"bottom"))t=n.now+1;else if(i||"Home"!==s)if(i||"End"!==s)if(!i&&o.horizontal&&/ArrowLeft|Left/.test(s))t=n.now-1;else{if(i||!o.horizontal||!/ArrowRight|Right/.test(s))return;t=n.now+1}else t=n.length-1;else t=0;d.indexCheck(t)!==n.now&&(n.type="key",d.pageChange(t))},scrollEnd:function(e,t){switch(t){case"top":return e.scrollTop<=0;case"bottom":return e.scrollTop>=e.scrollHeight-e.clientHeight;case"left":return e.scrollLeft<=0;case"right":return e.scrollLeft>=e.scrollWidth-e.clientWidth;default:return t}},wheel:function(e){n.wheelTick&&(requestAnimationFrame((function(){if(n.wheelTick=!0,!n.enable)return;if(!n.wheelEnable)return;const t=e.deltaY?-e.deltaY:e.wheelDelta?e.wheelDelta:-e.detail,o=document[n.fromPoint](e.pageX,e.pageY),s=t>0?"top":"bottom",i=d.indexCheck("top"===s?n.now-1:n.now+1);if(n.active===n.pages[n.now]&&i!==n.now){for(let e=0;e<o.length;e++){const t=o[e];if(t.classList.contains("docSlider-scroll")&&!d.scrollEnd(t,s))return}n.type="scroll",d.pageChange(i)}})),n.wheelTick=!1)},transitionstart:function(){n.wheelEnable=!1,o.scrollReset&&d.scrollReset(n.pages[n.now]),t&&d.animationReset(n.past),o.beforeChange(n.past,n.pages[n.past],n.now,n.pages[n.now],n.type),n.pastType=n.type,n.type=null},transitionend:function(){n.wheelEnable=!0,e&&scrollCue._updateWithDocSlider(),o.afterChange(n.now,n.pages[n.now],n.past,n.pages[n.past],n.pastType),n.pastType=null},resize:function(){n.resizeTimer>0&&clearTimeout(n.resizeTimer),n.resizeTimer=setTimeout(d.setFV,200)},setFV:function(){n.wrapper.style.height=window.innerHeight+"",n.wrapper.style.height=window.innerHeight+"px"},touchstart:function(e){n.enable&&(e.touches.length>1||(n.touch.move=!1,n.touch.X.start=e.touches[0].pageX,n.touch.Y.start=e.touches[0].pageY))},touchmove:function(e){n.enable&&(e.touches.length>1?e.preventDefault():(n.touch.move=!0,n.touch.X.move=e.changedTouches[0].pageX,n.touch.Y.move=e.changedTouches[0].pageY))},touchend:function(e){if(!n.enable)return;if(e.touches.length>1)return;if(!n.touch.move)return;if(n.touch.X.distance=n.touch.X.move-n.touch.X.start,n.touch.Y.distance=n.touch.Y.move-n.touch.Y.start,Math.abs(n.touch[n.xy].distance)<Math.abs(n.touch[n.yx].distance))return;const t=n.touch[n.xy].distance<0?"next":"prev",o=d.indexCheck("next"===t?n.now+1:n.now-1);if(o===n.now)return;if(0===n.now&&"prev"===t||n.now===n.length-1&&"next"===t)return;const s=n.touch[t+n.xy],i=document[n.fromPoint](n.touch.X.start,n.touch.Y.start);for(let e=0;e<i.length;e++){const t=i[e];if(t.classList.contains("docSlider-scroll")&&!d.scrollEnd(t,s))return}n.type="scroll",d.pageChange(o)},scrollReset:function(e){e.scrollTop=0,e.scrollLeft=0},animationReset:function(e){let t=document.querySelectorAll('[images-scpage][images-show="true"]');if(!t.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],s=o.getAttribute("images-addClass");if(o.getAttribute("images-scpage")!==e+""&&(o.removeAttribute("style"),o.removeAttribute("images-show"),s)){s=s.split(" ");for(let e=0;e<s.length;e++){let t=s[e];o.classList.remove(t)}}}scrollCue._searchElements()}};return{init:function(n){let d;s(n),i(),a(),l(),r(),d=c(),e="undefined"!=typeof scrollCue&&scrollCue._hasDocSlider(),t="undefined"!=typeof scrollCue&&scrollCue._hasPageChangeReset(),e&&scrollCue._initWithDocSlider(d),o.complete(o,docSlider.getElements())},jumpPage:function(e,t,o){let s;void 0!==e&&(s=isNaN(e)?d.hashToIndex("#"+e.replace("#","")):d.indexCheck(e<0?n.length+e:e),n.speed=void 0===t?null:t,n.easing=void 0===o?null:o,n.type="jumpPage",d.pageChange(s))},nextPage:function(e,t){const o=d.indexCheck(n.now+1);n.speed=void 0===e?null:e,n.easing=void 0===t?null:t,n.type="nextPage",d.pageChange(o)},prevPage:function(e,t){const o=d.indexCheck(n.now-1);n.speed=void 0===e?null:e,n.easing=void 0===t?null:t,n.type="prevPage",d.pageChange(o)},getOptions:function(){return o},getElements:function(){return{wrapper:n.wrapper,pages:n.pages,pager:n.pager,buttons:n.buttons}},getCurrentIndex:function(){return n.now},getCurrentPage:function(){return n.pages[n.now]},enable:function(e){n.enable=void 0===e?!n.enable:e;const t=n.enable?"0":"-1";for(let e=0;e<n.length;e++)n.pages[e].setAttribute("tabindex",t)},_getWheelEnable:function(){return n.wheelEnable}}}();document.addEventListener("DOMContentLoaded",(function(){let e=["padding: 1rem;","font: 2rem/3 Georgia;","color: #485580;"].join("");console.info("%c%s",e,"by flNikolai 😜")}));